<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>SHINOBI-STARK OS: GOD MODE</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/holistic/holistic.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Share Tech Mono', monospace; }
        canvas { display: block; width: 100vw; height: 100vh; transform: scaleX(-1); }
        .hud-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; border: 2px solid rgba(0, 255, 0, 0.2);
            box-shadow: inset 0 0 100px rgba(0, 255, 0, 0.1); z-index: 5;
        }
        #top-info { position: absolute; top: 20px; width: 100%; text-align: center; color: #0f0; letter-spacing: 5px; font-size: 20px; text-shadow: 0 0 10px #0f0; }
    </style>
</head>
<body>
    <div class="hud-overlay"></div>
    <div id="top-info">NVG_MODE: ACTIVE // PROTOCOL: SHINOBI</div>
    <canvas id="output"></canvas>
    <video id="video" style="display:none" playsinline></video>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('output');
        const ctx = canvas.getContext('2d');
        let frame = 0;

        function onResults(res) {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            ctx.save();
            
            // 1. ÃœST SEVÄ°YE GECE GÃ–RÃœÅžÃœ (NASA GREEN FILTER)
            ctx.filter = "brightness(1.2) contrast(1.5) sepia(1) hue-rotate(80deg) saturate(2)";
            ctx.drawImage(res.image, 0, 0, canvas.width, canvas.height);
            ctx.filter = "none";

            // 2. TAKTÄ°KSEL IZGARA
            ctx.strokeStyle = "rgba(0, 255, 0, 0.2)";
            for(let i=0; i<canvas.width; i+=100) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke(); }

            // 3. ANÄ°ME & ASKERÄ° EFEKTLER
            if (res.rightHandLandmarks || res.leftHandLandmarks) {
                const hand = res.rightHandLandmarks || res.leftHandLandmarks;
                const cx = hand[9].x * canvas.width;
                const cy = hand[9].y * canvas.height;
                const code = getCode(hand);

                ctx.shadowBlur = 30;

                if (code === "00000") { // âœŠ CHIDORI / ENERGY BALL
                    ctx.shadowColor = "#0ff";
                    ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
                    ctx.beginPath(); ctx.arc(cx, cy, 40, 0, 7); ctx.fill();
                    for(let i=0; i<8; i++) {
                        ctx.strokeStyle = "#0ff"; ctx.lineWidth = 2;
                        ctx.beginPath(); ctx.moveTo(cx, cy);
                        ctx.lineTo(cx+(Math.random()-0.5)*200, cy+(Math.random()-0.5)*200); ctx.stroke();
                    }
                } 
                else if (code === "11111") { // ðŸ–ï¸ REPULSOR / SHINRA TENSEI
                    ctx.shadowColor = "#f00";
                    ctx.strokeStyle = "#fff"; ctx.lineWidth = 5;
                    ctx.beginPath(); ctx.arc(cx, cy, 60 + (frame%20), 0, 7); ctx.stroke();
                    ctx.beginPath(); ctx.arc(cx, cy, 30, 0, 7); ctx.fillStyle="white"; ctx.fill();
                }
                else if (code === "01100") { // âœŒï¸ INFINITY AURA (GOJO STYLE)
                    ctx.shadowColor = "#m0f";
                    let t = Date.now() * 0.01;
                    for(let i=0; i<6; i++) {
                        ctx.strokeStyle = `hsl(${280+i*10}, 100%, 50%)`;
                        ctx.beginPath(); ctx.arc(cx, cy, i*20, t+i, t+i+3); ctx.stroke();
                    }
                }
                else if (code === "01000") { // â˜ï¸ AMATERASU / LASER
                    ctx.strokeStyle = "red"; ctx.lineWidth = 10; ctx.shadowColor="red";
                    ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(cx, 0); ctx.stroke();
                }
            }

            // 4. JUTSU MÃœHÃœRÃœ (Ä°KÄ° EL YAN YANA GELÄ°NCE)
            if (res.leftHandLandmarks && res.rightHandLandmarks) {
                const lx = res.leftHandLandmarks[9].x * canvas.width;
                const rx = res.rightHandLandmarks[9].y * canvas.height;
                if (Math.abs(lx - rx) < 200) {
                    ctx.strokeStyle = "yellow"; ctx.shadowColor = "yellow";
                    ctx.font = "40px Courier";
                    ctx.strokeText("JUTSU: SEAL RELEASED", canvas.width/2 - 200, canvas.height/2);
                }
            }

            ctx.restore();
            frame++;
        }

        function getCode(h) {
            let f = [h[4].x < h[3].x ? 1 : 0];
            [8,12,16,20].forEach(i => f.push(h[i].y < h[i-2].y ? 1 : 0));
            return f.join('');
        }

        const h = new Holistic({locateFile: (f) => `https://cdn.jsdelivr.net/npm/@mediapipe/holistic/${f}`});
        h.setOptions({ modelComplexity: 1, minDetectionConfidence: 0.5 });
        h.onResults(onResults);
        new Camera(video, {onFrame: async () => await h.send({image: video}), width: 1280, height: 720}).start();
    </script>
</body>
</html>
