<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker Matematik - Sesli Sürüm</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { background-color: black; color: #0f0; font-family: 'Courier New', Courier, monospace; margin: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; transition: background-color 0.2s; }
        #matrix-canvas { position: fixed; top: 0; left: 0; z-index: -1; }
        #secret-trigger { position: absolute; top: 10px; right: 15px; font-size: 10px; color: #002200; cursor: pointer; z-index: 100; user-select: none; }
        #secret-trigger:hover { color: #0f0; }
        .container { background: rgba(0, 15, 0, 0.95); border: 2px solid #0f0; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 0 30px #0f0; width: 85%; max-width: 450px; z-index: 1; position: relative; }
        .level-tag { color: #ff0; font-weight: bold; margin-bottom: 10px; display: block; border: 1px solid #ff0; padding: 5px; }
        button { background: transparent; color: #0f0; border: 2px solid #0f0; padding: 12px 20px; font-size: 16px; cursor: pointer; font-family: 'Courier New', Courier, monospace; margin-top: 15px; width: 100%; }
        button:hover { background: #0f0; color: black; box-shadow: 0 0 15px #0f0; }
        input { background: black; border: 1px solid #0f0; color: #0f0; padding: 12px; font-size: 22px; text-align: center; width: 80%; outline: none; margin-top: 10px; }
        .hidden { display: none; }
        #feedback { height: 25px; margin-top: 10px; font-weight: bold; }
        .exit-btn { border-color: #ff0000; color: #ff0000; margin-top: 25px; }
        @keyframes shake { 0%{transform:translate(1px,1px)} 20%{transform:translate(-3px,0px)} 40%{transform:translate(3px,2px)} 60%{transform:translate(-3px,1px)} 80%{transform:translate(3px,-1px)} 100%{transform:translate(1px,-2px)} }
        .shake { animation: shake 0.3s; }
    </style>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>

    <div id="secret-trigger" onclick="openSecretPanel()">[ ENCRYPTED ]</div>

    <div id="intro" class="container">
        <h1>> SİSTEME SIZILIYOR...</h1>
        <p>Sesli protokoller aktif edildi.</p>
        <button onclick="startGame()">SİSTEMİ BAŞLAT</button>
    </div>

    <div id="game" class="container hidden">
        <span id="level-indicator" class="level-tag">SEVİYE: 1</span>
        <h2 id="question-text">...</h2>
        <input type="number" id="answer-input" placeholder="Şifre?" onkeydown="if(event.key==='Enter') checkAnswer()">
        <p id="feedback"></p>
        <button onclick="checkAnswer()">VERİYİ DOĞRULA</button>
    </div>

    <div id="final-screen" class="container hidden">
        <h1>ERİŞİM SAĞLANDI ✅</h1>
        <p>Tüm sistem kontrolün altında.</p>
        <button class="exit-btn" onclick="exitSystem()">SİSTEMİ İMHA ET VE ÇIK</button>
    </div>

    <script>
        // Ses Efektleri (Browser'ın sentezleyici sesini kullanıyoruz)
        const synth = window.speechSynthesis;
        function playSound(text) {
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'en-US'; // Hacker sesi gibi olsun diye İngilizce tonlama
            utter.rate = 1.2;
            utter.pitch = 0.5;
            synth.speak(utter);
        }

        // Bip Sesi (Beep)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function beep(freq, dur) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.frequency.value = freq;
            osc.start();
            setTimeout(() => osc.stop(), dur);
        }

        // Matrix Efekti
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const drops = Array(Math.floor(canvas.width / 16)).fill(1);
        function drawMatrix() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.1)"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#0f0"; ctx.font = "15px monospace";
            drops.forEach((y, i) => {
                ctx.fillText(Math.floor(Math.random()*2), i * 16, y * 16);
                if (y * 16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(drawMatrix, 40);

        let currentIdx = 0;
        let questions = [
            { q: "40 x 5 ?", a: 200, l: "GÜVENLİK 1" },
            { q: "900 / 3 ?", a: 300, l: "GÜVENLİK 2" },
            { q: "120 + 380 ?", a: 500, l: "GÜVENLİK 3" }
        ];

        function startGame() {
            beep(440, 100);
            document.getElementById('intro').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            if (currentIdx < questions.length) {
                document.getElementById('level-indicator').innerText = questions[currentIdx].l;
                document.getElementById('question-text').innerText = questions[currentIdx].q;
                document.getElementById('answer-input').value = "";
                document.getElementById('answer-input').focus();
            } else {
                document.getElementById('game').classList.add('hidden');
                document.getElementById('final-screen').classList.remove('hidden');
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                playSound("Access Granted. System is yours.");
            }
        }

        function checkAnswer() {
            const val = document.getElementById('answer-input').value;
            const gameContainer = document.getElementById('game');
            
            if (val == questions[currentIdx].a) {
                currentIdx++;
                beep(880, 50);
                document.getElementById('feedback').style.color = "#0f0";
                document.getElementById('feedback').innerText = "DOĞRU.";
                setTimeout(showQuestion, 500);
            } else {
                beep(110, 200);
                document.body.style.backgroundColor = "#330000";
                gameContainer.classList.add('shake');
                document.getElementById('feedback').style.color = "red";
                document.getElementById('feedback').innerText = "HATALI ŞİFRE!";
                setTimeout(() => {
                    document.body.style.backgroundColor = "black";
                    gameContainer.classList.remove('shake');
                    document.getElementById('feedback').innerText = "";
                }, 500);
            }
        }

        function openSecretPanel() {
            let code = prompt("GİZLİ ERİŞİM ŞİFRESİ:");
            if (code === "2015") {
                beep(1200, 300);
                alert("ULTRA HACKER MODU!");
                questions = [
                    { q: "25 x 25 ?", a: 625, l: "ULTRA 1" },
                    { q: "10000 / 4 ?", a: 2500, l: "ULTRA 2" }
                ];
                currentIdx = 0;
                startGame();
            }
        }

        function exitSystem() {
            playSound("System destruction in three, two, one.");
            document.body.innerHTML = "<div style='color:red; text-align:center; margin-top:20%; font-family:monospace;'><h1>> SİSTEM İMHA EDİLDİ.</h1></div>";
            setTimeout(() => { window.close(); }, 3000);
        }
    </script>
</body>
</html>
