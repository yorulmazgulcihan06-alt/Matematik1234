<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROBLOX MULTIPLAYER REAL-TIME</title>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.29.9.min.js"></script>
    <style>
        body { margin: 0; background: #1b1d1f; overflow: hidden; color: white; font-family: sans-serif; }
        #game-world { width: 100vw; height: 100vh; position: relative; background: #333; }
        .player { 
            position: absolute; width: 40px; height: 40px; 
            background: #00b2ff; border-radius: 8px; text-align: center;
            font-size: 10px; font-weight: bold; transition: all 0.1s linear;
        }
        .my-player { background: #00e676; box-shadow: 0 0 20px #00e676; z-index: 10; }
        #ui { position: fixed; top: 10px; left: 10px; z-index: 100; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px; }
    </style>
</head>
<body>

<div id="ui">
    <b>ROBLOX REAL ONLINE</b><br>
    Durum: <span id="status" style="color:#00e676">Bağlanıyor...</span><br>
    Robux: <span id="r-val">20,000</span>
</div>

<div id="game-world"></div>

<script>
    const myID = "User_" + Math.floor(Math.random() * 9999);
    let robux = 20000;
    
    // MULTIPLAYER KURULUMU (PubNub Ücretsiz Anahtarları)
    const pubnub = new PubNub({
        publishKey: 'demo', // Test için demo anahtarı
        subscribeKey: 'demo',
        uuid: myID
    });

    pubnub.subscribe({ channels: ['roblox_utkan'] });

    const world = document.getElementById('game-world');
    const players = {};

    // 1. KENDİ KARAKTERİMİ OLUŞTUR
    function createPlayer(id, isMe) {
        const div = document.createElement('div');
        div.id = id;
        div.className = 'player' + (isMe ? ' my-player' : '');
        div.innerText = isMe ? "SEN" : id;
        world.appendChild(div);
        players[id] = div;
    }

    createPlayer(myID, true);
    document.getElementById('status').innerText = "ÇEVRİMİÇİ";

    // 2. HAREKET ET VE DİĞERLERİNE GÖNDER
    window.addEventListener('keydown', (e) => {
        const p = players[myID];
        let top = p.offsetTop;
        let left = p.offsetLeft;

        if(e.key === 'w') top -= 20;
        if(e.key === 's') top += 20;
        if(e.key === 'a') left -= 20;
        if(e.key === 'd') left += 20;

        // Pozisyonu güncelle
        p.style.top = top + "px";
        p.style.left = left + "px";

        // DİĞER OYUNCULARA MESAJ AT (Ben buradayım!)
        pubnub.publish({
            channel: 'roblox_utkan',
            message: { id: myID, x: left, y: top }
        });
    });

    // 3. DİĞER OYUNCULARI GÖR
    pubnub.addListener({
        message: function(event) {
            const data = event.message;
            if(data.id !== myID) {
                if(!players[data.id]) {
                    createPlayer(data.id, false);
                }
                players[data.id].style.left = data.x + "px";
                players[data.id].style.top = data.y + "px";
            }
        }
    });

    // ROBUX KAZANMA
    setInterval(() => {
        robux += 10;
        document.getElementById('r-val').innerText = robux.toLocaleString();
    }, 2000);

</script>
</body>
</html>
