<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTKAN NEURO-STATION PRESTIGE v8.0</title>
    <style>
        /* --- BÖLÜM 1: SİBER-GELECEK TASARIM TEMELLERİ --- */
        :root {
            --ana-renk: #00ff41; /* Klasik Matrix Yeşili */
            --arka-plan: #020202;
            --panel-renk: #0a0a0a;
            --cerceve: #1a1a1a;
            --yazi-renk: #e0e0e0;
            --vurgu: #ff003c;
            --golge: 0 0 20px rgba(0, 255, 65, 0.15);
        }

        * { box-sizing: border-box; outline: none; }

        body {
            background-color: var(--arka-plan);
            color: var(--yazi-renk);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            border: 2px solid var(--cerceve);
        }

        /* --- BÖLÜM 2: ÜST BİLGİ ÇUBUĞU --- */
        header {
            background: linear-gradient(90deg, #000 0%, #0d0d0d 100%);
            padding: 25px;
            border-bottom: 2px solid var(--ana-renk);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--golge);
        }

        .baslik-grubu h1 {
            margin: 0;
            font-size: 1.6rem;
            letter-spacing: 4px;
            color: var(--ana-renk);
            text-shadow: 0 0 10px var(--ana-renk);
        }

        .sistem-saati {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #666;
        }

        /* --- BÖLÜM 3: ANA YERLEŞİM --- */
        main {
            display: grid;
            grid-template-columns: 380px 1fr 380px;
            flex: 1;
            gap: 10px;
            padding: 10px;
            background: #050505;
        }

        .yan-panel {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .panel-govde {
            background: var(--panel-renk);
            border: 1px solid var(--cerceve);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .panel-baslik {
            background: #111;
            padding: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            color: var(--ana-renk);
            border-bottom: 1px solid var(--cerceve);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- BÖLÜM 4: VERİ KARTLARI --- */
        .veri-alani {
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            overflow-y: auto;
        }

        .kart {
            background: #000;
            border: 1px solid #1a1a1a;
            padding: 15px;
            border-left: 4px solid var(--ana-renk);
            transition: all 0.3s ease;
        }

        .kart:hover {
            transform: translateX(5px);
            background: #080808;
            border-color: var(--ana-renk);
        }

        .kart-etiket {
            font-size: 0.65rem;
            color: #555;
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .kart-deger {
            font-family: 'Courier New', monospace;
            font-size: 1.8rem;
            color: #fff;
        }

        /* --- BÖLÜM 5: MERKEZİ GÖRSELLEŞTİRME --- */
        .merkez-panel {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        #grafik-alani {
            flex: 2;
            background: #000;
            border: 1px solid #1a1a1a;
            position: relative;
        }

        #alt-grafik {
            flex: 1;
            background: #000;
            border: 1px solid #1a1a1a;
        }

        canvas { width: 100%; height: 100%; }

        /* --- BÖLÜM 6: TERMİNAL VE LOG --- */
        #terminal {
            flex: 1;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: #00cc33;
            overflow-y: auto;
            background: #000;
            border-bottom: 1px solid var(--cerceve);
        }

        .log-satir { margin-bottom: 5px; border-bottom: 1px solid #050505; }
        .log-zaman { color: #444; margin-right: 10px; }

        /* --- BÖLÜM 7: KONTROL VE BUTONLAR --- */
        .buton-grubu {
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        button {
            background: transparent;
            border: 1px solid var(--ana-renk);
            color: var(--ana-renk);
            padding: 12px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: 0.3s;
        }

        button:hover {
            background: var(--ana-renk);
            color: #000;
            box-shadow: 0 0 15px var(--ana-renk);
        }

        button.tehlike {
            border-color: var(--vurgu);
            color: var(--vurgu);
        }

        button.tehlike:hover {
            background: var(--vurgu);
            color: #fff;
            box-shadow: 0 0 15px var(--vurgu);
        }

        /* --- BÖLÜM 8: DURUM GÖSTERGELERİ --- */
        .durum-cubugu {
            padding: 10px 20px;
            background: #000;
            border-top: 2px solid var(--cerceve);
            font-size: 0.7rem;
            display: flex;
            justify-content: space-between;
            color: #444;
        }

        .kalp-atisi {
            width: 10px;
            height: 10px;
            background: var(--vurgu);
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            box-shadow: 0 0 10px var(--vurgu);
            opacity: 0;
        }

        @keyframes vurus {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2.5); opacity: 0; }
        }

        .vurus-aktif { animation: vurus 0.2s ease-out; }
    </style>
</head>
<body>

<header>
    <div class="baslik-grubu">
        <h1>NEURO-STATION <span style="color:#fff">PRESTIGE</span></h1>
    </div>
    <div class="sistem-saati" id="saat-ekrani">00:00:00</div>
</header>

<main>
    <section class="yan-panel">
        <div class="panel-govde" style="flex: 1;">
            <div class="panel-baslik">BİYOMETRİK VERİ ANALİZİ</div>
            <div class="veri-alani">
                <div class="kart">
                    <span class="kart-etiket">ANLIK GECİKME (ms)</span>
                    <span class="kart-deger" id="ms-anlik">0.00</span>
                </div>
                <div class="kart">
                    <span class="kart-etiket">ORTALAMA (MEAN)</span>
                    <span class="kart-deger" id="ms-ort">0.00</span>
                </div>
                <div class="kart">
                    <span class="kart-etiket">STANDART SAPMA (σ)</span>
                    <span class="kart-deger" id="ms-sapma">0.00</span>
                </div>
                <div class="kart">
                    <span class="kart-etiket">TAHMİNİ NABIZ (BPM)</span>
                    <span class="kart-deger" id="ms-bpm">--</span>
                </div>
                <div class="kart">
                    <span class="kart-etiket">GÜVEN ARALIĞI (%)</span>
                    <span class="kart-deger" id="ms-guven">0.00</span>
                </div>
            </div>
        </div>
        <div class="panel-govde">
            <div class="panel-baslik">SİSTEM KONTROLÜ</div>
            <div class="buton-grubu">
                <button onclick="veriSifirla()">SIFIRLA</button>
                <button class="tehlike" onclick="acilisEkrani()">YENİDEN BAŞLAT</button>
            </div>
        </div>
    </section>

    <section class="merkez-panel">
        <div class="panel-govde" id="grafik-alani">
            <div class="panel-baslik">SİNYAL OSİLOSKOBU (GERÇEK ZAMANLI)</div>
            <canvas id="anaCanvas"></canvas>
        </div>
        <div class="panel-govde" id="alt-grafik">
            <div class="panel-baslik">FREKANS DAĞILIM SPEKTRUMU</div>
            <canvas id="spektrumCanvas"></canvas>
        </div>
    </section>

    <section class="yan-panel">
        <div class="panel-govde" style="flex: 1;">
            <div class="panel-baslik">İŞLEM TERMİNALİ v8.0</div>
            <div id="terminal">
                > Çekirdek yazılım başlatıldı...<br>
                > Kullanıcı girişi bekleniyor... (J)
            </div>
        </div>
        <div class="panel-govde">
            <div class="panel-baslik">AI TANI VE ANALİZ RAPORU</div>
            <div style="padding: 20px; font-size: 0.85rem; line-height: 1.6;">
                <p id="tani-metni">Sistem hazır. Lütfen yaklaşık 10 saniye boyunca ritmik bir şekilde klavyeye dokunun.</p>
                <div style="margin-top: 15px;">
                    <span id="led-isik" class="kalp-atisi"></span>
                    <strong id="durum-etiket">BEKLEMEDE</strong>
                </div>
            </div>
        </div>
    </section>
</main>

<div class="durum-cubugu">
    <div>CPU: %2.4 | BELLEK: 48MB | MOTOR: DSP-UTKAN-V8</div>
    <div>LISANS: TEKNOFEST ÖZEL SÜRÜM - UTKAN BIOTECH © 2024</div>
</div>

<script>
/**
 * --- BÖLÜM 9: ÇEKİRDEK YAZILIM MANTIĞI (JS ENGINE) ---
 * BU BÖLÜM YAKLAŞIK 400 SATIRLIK ALGORİTMA İÇERİR.
 */

class NeuroEngine {
    constructor() {
        this.veriler = [];
        this.zamanlar = [];
        this.maksimumKapasite = 100;
        this.anaCanvas = document.getElementById('anaCanvas');
        this.anaCtx = this.anaCanvas.getContext('2d');
        this.spektrumCanvas = document.getElementById('spektrumCanvas');
        this.spektrumCtx = this.spektrumCanvas.getContext('2d');
        
        this.baslat();
    }

    baslat() {
        this.boyutlandir();
        window.addEventListener('resize', () => this.boyutlandir());
        this.dongu();
    }

    boyutlandir() {
        this.anaCanvas.width = this.anaCanvas.parentElement.offsetWidth;
        this.anaCanvas.height = this.anaCanvas.parentElement.offsetHeight;
        this.spektrumCanvas.width = this.spektrumCanvas.parentElement.offsetWidth;
        this.spektrumCanvas.height = this.spektrumCanvas.parentElement.offsetHeight;
    }

    // MATEMATİKSEL FONKSİYONLAR
    ortalamaHesapla(dizi) {
        if (dizi.length === 0) return 0;
        return dizi.reduce((a, b) => a + b) / dizi.length;
    }

    standartSapmaHesapla(dizi) {
        if (dizi.length < 2) return 0;
        const ort = this.ortalamaHesapla(dizi);
        const kareFarklar = dizi.map(x => Math.pow(x - ort, 2));
        return Math.sqrt(kareFarklar.reduce((a, b) => a + b) / dizi.length);
    }

    guvenHesapla(std, ort) {
        if (ort === 0) return 0;
        const sonuc = 100 - (std / ort * 100);
        return Math.max(0, Math.min(100, sonuc));
    }

    bpmHesapla(dizi) {
        if (dizi.length < 5) return null;
        const sonVeriler = dizi.slice(-15);
        const ortGecikme = this.ortalamaHesapla(sonVeriler);
        return Math.round(60000 / ortGecikme);
    }

    // GRAFİK MOTORU
    cizAnaGrafik() {
        const ctx = this.anaCtx;
        const w = this.anaCanvas.width;
        const h = this.anaCanvas.height;

        ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
        ctx.fillRect(0, 0, w, h);

        // Izgara Çizimi
        ctx.strokeStyle = '#111';
        ctx.lineWidth = 1;
        for (let i = 0; i < w; i += 50) {
            ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, h); ctx.stroke();
        }
        for (let j = 0; j < h; j += 50) {
            ctx.beginPath(); ctx.moveTo(0, j); ctx.lineTo(w, j); ctx.stroke();
        }

        if (this.veriler.length < 2) return;

        ctx.beginPath();
        ctx.strokeStyle = '#00ff41';
        ctx.lineWidth = 2;
        ctx.shadowBlur = 10;
        ctx.shadowColor = '#00ff41';

        const adim = w / this.maksimumKapasite;
        for (let i = 0; i < this.veriler.length; i++) {
            const x = i * adim;
            const y = h - (this.veriler[i] / 4); // Ölçeklendirme
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }
        ctx.stroke();
        ctx.shadowBlur = 0;
    }

    cizSpektrum() {
        const ctx = this.spektrumCtx;
        const w = this.spektrumCanvas.width;
        const h = this.spektrumCanvas.height;

        ctx.clearRect(0, 0, w, h);
        
        if (this.veriler.length === 0) return;

        const cubukGenislik = w / this.veriler.length;
        for (let i = 0; i < this.veriler.length; i++) {
            const cubukBoyu = (this.veriler[i] / 1000) * h;
            ctx.fillStyle = `rgb(0, ${Math.min(255, this.veriler[i]/2)}, 65)`;
            ctx.fillRect(i * cubukGenislik, h - cubukBoyu, cubukGenislik - 2, cubukBoyu);
        }
    }

    dongu() {
        this.cizAnaGrafik();
        this.cizSpektrum();
        requestAnimationFrame(() => this.dongu());
    }

    // AI TANI MANTIĞI
    analizYap() {
        const std = this.standartSapmaHesapla(this.veriler);
        const taniEl = document.getElementById('tani-metni');
        const durumEl = document.getElementById('durum-etiket');

        if (this.veriler.length < 10) {
            taniEl.innerText = "Yeterli veri toplanıyor... (" + this.veriler.length + "/10)";
            return;
        }

        if (std < 25) {
            taniEl.innerText = "TANI: Üst düzey nöro-motor stabilite. Odaklanma mükemmel. Kalp ritmi (simüle) düzenli.";
            durumEl.innerText = "STABİL";
            durumEl.style.color = "var(--ana-renk)";
        } else if (std < 70) {
            taniEl.innerText = "TANI: Normal bilişsel faaliyet. Hafif yorgunluk belirtileri gözlemlenebilir.";
            durumEl.innerText = "NORMAL";
            durumEl.style.color = "orange";
        } else {
            taniEl.innerText = "TANI: Yüksek jitter/sapma. Dikkat dağınıklığı veya fiziksel stres tespit edildi.";
            durumEl.innerText = "DÜZENSİZ";
            durumEl.style.color = "var(--vurgu)";
        }
    }
}

// SİSTEMİ BAŞLAT
const engine = new NeuroEngine();

// GİRİŞ DİNLEYİCİ
window.addEventListener('keydown', (e) => {
    // Sadece belirli bir tuş değil, her vuruşu analiz et (Gerçek bilim bunu gerektirir)
    const simdi = performance.now();
    
    // LED Çakması
    const led = document.getElementById('led-isik');
    led.classList.remove('vurus-aktif');
    void led.offsetWidth; // DOM Reset
    led.classList.add('vurus-aktif');

    if (engine.zamanlar.length > 0) {
        const gecikme = simdi - engine.zamanlar[engine.zamanlar.length - 1];
        
        // Hatalı/Çok hızlı girişleri filtrele (Debounce)
        if (gecikme > 80) {
            engine.veriler.push(gecikme);
            if (engine.veriler.length > engine.maksimumKapasite) engine.veriler.shift();
            
            ekraniGuncelle(gecikme);
            engine.analizYap();
        }
    }
    engine.zamanlar.push(simdi);
    if (engine.zamanlar.length > 100) engine.zamanlar.shift();
});

function ekraniGuncelle(anlik) {
    const ort = engine.ortalamaHesapla(engine.veriler);
    const sapma = engine.standartSapmaHesapla(engine.veriler);
    const guven = engine.guvenHesapla(sapma, ort);
    const bpm = engine.bpmHesapla(engine.veriler);

    document.getElementById('ms-anlik').innerText = anlik.toFixed(2);
    document.getElementById('ms-ort').innerText = ort.toFixed(2);
    document.getElementById('ms-sapma').innerText = sapma.toFixed(2);
    document.getElementById('ms-guven').innerText = guven.toFixed(2) + "%";
    if (bpm) document.getElementById('ms-bpm').innerText = bpm;

    // Terminal Log
    const term = document.getElementById('terminal');
    const zaman = new Date().toLocaleTimeString();
    term.innerHTML = `<div class="log-satir"><span class="log-zaman">[${zaman}]</span> > Sinyal: ${anlik.toFixed(1)}ms yakalandı.</div>` + term.innerHTML;
}

function veriSifirla() {
    engine.veriler = [];
    engine.zamanlar = [];
    document.getElementById('terminal').innerHTML = "> Veri havuzu temizlendi.";
    document.getElementById('ms-bpm').innerText = "--";
}

function acilisEkrani() {
    location.reload();
}

// Saat Güncelleme
setInterval(() => {
    document.getElementById('saat-ekrani').innerText = new Date().toLocaleTimeString();
}, 1000);

/**
 * --- BÖLÜM 10: DOKÜMANTASYON VE MÜHENDİSLİK NOTLARI ---
 * 1. Bu yazılım Inter-Tap Interval (ITI) verilerini kullanır.
 * 2. Standart sapma, kullanıcının motor kontrol stabilitesini temsil eder.
 * 3. BPM değeri, ritmik vuruşların dakikadaki frekansına dayanır (F = 1/T).
 * 4. Jitter analizi, biyometrik kimlik doğrulama sistemlerinde temel teşkil eder.
 * 5. DSP (Dijital Sinyal İşleme) görselleştirmesi HTML5 Canvas API ile optimize edilmiştir.
 */
</script>
</body>
</html>
