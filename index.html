<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker Matematik - Final Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { background-color: black; color: #0f0; font-family: 'Courier New', Courier, monospace; margin: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; transition: background-color 0.2s; }
        #matrix-canvas { position: fixed; top: 0; left: 0; z-index: -1; }
        
        /* Gizli Buton */
        #secret-trigger { position: absolute; top: 10px; right: 15px; font-size: 10px; color: #002200; cursor: pointer; z-index: 100; user-select: none; }
        #secret-trigger:hover { color: #0f0; }

        .container { background: rgba(0, 15, 0, 0.95); border: 2px solid #0f0; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 0 30px #0f0; width: 85%; max-width: 450px; z-index: 1; position: relative; }
        .level-tag { color: #ff0; font-weight: bold; margin-bottom: 10px; display: block; border: 1px solid #ff0; padding: 5px; }
        
        button { background: transparent; color: #0f0; border: 2px solid #0f0; padding: 12px 20px; font-size: 16px; cursor: pointer; font-family: 'Courier New', Courier, monospace; margin-top: 15px; width: 100%; }
        button:hover { background: #0f0; color: black; box-shadow: 0 0 15px #0f0; }
        
        input { background: black; border: 1px solid #0f0; color: #0f0; padding: 12px; font-size: 22px; text-align: center; width: 80%; outline: none; margin-top: 10px; }
        
        .hidden { display: none; }
        #feedback { height: 25px; margin-top: 10px; font-weight: bold; }
        .exit-btn { border-color: #ff0000; color: #ff0000; margin-top: 25px; }

        /* Sallanma Efekti */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            40% { transform: translate(3px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            80% { transform: translate(3px, -1px) rotate(1deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shake { animation: shake 0.3s; }
    </style>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>

    <div id="secret-trigger" onclick="openSecretPanel()">[ ENCRYPTED ]</div>

    <div id="intro" class="container">
        <h1>> SİSTEME SIZILIYOR...</h1>
        <p>Matematik bariyerlerini aşarak ana servera ulaş.</p>
        <button onclick="startGame()">SİSTEMİ BAŞLAT</button>
    </div>

    <div id="game" class="container hidden">
        <span id="level-indicator" class="level-tag">SEVİYE: 1</span>
        <h2 id="question-text">...</h2>
        <input type="number" id="answer-input" placeholder="Şifre?" onkeydown="if(event.key==='Enter') checkAnswer()">
        <p id="feedback"></p>
        <button onclick="checkAnswer()">VERİYİ DOĞRULA</button>
    </div>

    <div id="final-screen" class="container hidden">
        <h1>ERİŞİM SAĞLANDI ✅</h1>
        <p>Tüm sistem kontrolün altında hacker.</p>
        <button class="exit-btn" onclick="exitSystem()">SİSTEMİ İMHA ET VE ÇIK</button>
    </div>

    <script>
        // Matrix Efekti
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const drops = Array(Math.floor(canvas.width / 16)).fill(1);
        function drawMatrix() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.1)"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#0f0"; ctx.font = "15px monospace";
            drops.forEach((y, i) => {
                ctx.fillText(Math.floor(Math.random()*2), i * 16, y * 16);
                if (y * 16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(drawMatrix, 40);

        // Oyun Mantığı
        let currentIdx = 0;
        let questions = [
            { q: "25 x 4 ?", a: 100, l: "KOLAY" },
            { q: "450 / 5 ?", a: 90, l: "ORTA" },
            { q: "(12 x 5) + 40 ?", a: 100, l: "ZOR" }
        ];

        function startGame() {
            document.getElementById('intro').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            if (currentIdx < questions.length) {
                document.getElementById('level-indicator').innerText = questions[currentIdx].l;
                document.getElementById('question-text').innerText = questions[currentIdx].q;
                document.getElementById('answer-input').value = "";
                document.getElementById('answer-input').focus();
            } else {
                document.getElementById('game').classList.add('hidden');
                document.getElementById('final-screen').classList.remove('hidden');
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }
        }

        function checkAnswer() {
            const val = document.getElementById('answer-input').value;
            const gameContainer = document.getElementById('game');
            
            if (val == questions[currentIdx].a) {
                currentIdx++;
                document.getElementById('feedback').style.color = "#0f0";
                document.getElementById('feedback').innerText = "DOĞRU. SONRAKİ KATMAN...";
                setTimeout(showQuestion, 600);
            } else {
                // HATA EFEKTİ
                document.body.style.backgroundColor = "#330000";
                gameContainer.classList.add('shake');
                document.getElementById('feedback').style.color = "red";
                document.getElementById('feedback').innerText = "!!! YANLIŞ ŞİFRE - ALARM !!!";
                
                setTimeout(() => {
                    document.body.style.backgroundColor = "black";
                    gameContainer.classList.remove('shake');
                    document.getElementById('feedback').innerText = "";
                }, 500);
            }
        }

        // GİZLİ KOD (2015)
        function openSecretPanel() {
            let code = prompt("GİZLİ ERİŞİM ŞİFRESİ:");
            if (code === "2015") {
                alert("ULTRA HACKER MODU AKTİF!");
                questions = [
                    { q: "500 x 40 ?", a: 20000, l: "HACKER SEVİYE 1" },
                    { q: "8800 / 11 ?", a: 800, l: "HACKER SEVİYE 2" },
                    { q: "12'nin karesi ?", a: 144, l: "HACKER SEVİYE 3" }
                ];
                currentIdx = 0;
                startGame();
            } else {
                alert("Geçersiz Kod!");
            }
        }

        function exitSystem() {
            document.body.innerHTML = "<div style='color:red; text-align:center; margin-top:20%; font-family:monospace;'><h1>> SİSTEM İMHA EDİLDİ.</h1><p>Bağlantı kesiliyor...</p></div>";
            setTimeout(() => { window.close(); }, 2000);
        }
    </script>
</body>
</html>
