<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utkan AI | Math Universe Professional</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root { --p-color: #00d2ff; --s-color: #3a7bd5; --accent: #ff0077; --bg: #0f0c29; }
        body { font-family: 'Roboto', sans-serif; background: linear-gradient(to right, #0f0c29, #302b63, #24243e); color: white; margin: 0; overflow-x: hidden; }
        
        /* HEADER */
        .hud { position: sticky; top: 0; background: rgba(0,0,0,0.8); padding: 15px; display: flex; justify-content: space-around; border-bottom: 2px solid var(--p-color); z-index: 1000; font-family: 'Orbitron', sans-serif; }
        .hud div { text-shadow: 0 0 10px var(--p-color); }

        .container { max-width: 1100px; margin: 20px auto; padding: 20px; }

        /* KANKA AI AVATAR & DIALOG */
        .ai-center { background: rgba(255,255,255,0.05); border-radius: 30px; padding: 30px; display: flex; align-items: center; gap: 30px; border: 1px solid var(--p-color); box-shadow: 0 0 30px rgba(0,210,255,0.2); margin-bottom: 30px; }
        .avatar-zone { position: relative; }
        .avatar { font-size: 70px; width: 120px; height: 120px; background: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 4px solid var(--accent); animation: float 3s ease-in-out infinite; }
        .bot-companion { position: absolute; bottom: -10px; right: -10px; font-size: 30px; display: none; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* GAME MODES */
        .mode-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .card { background: rgba(255,255,255,0.1); border-radius: 20px; padding: 25px; cursor: pointer; transition: 0.4s; border: 1px solid transparent; text-align: center; }
        .card:hover { background: rgba(255,255,255,0.2); border-color: var(--p-color); transform: scale(1.05); }

        /* MODALS */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: none; z-index: 2000; overflow-y: auto; padding: 40px 20px; }
        .modal-inner { max-width: 800px; margin: auto; background: #1a1a2e; border-radius: 30px; padding: 40px; border: 2px solid var(--accent); position: relative; }

        /* MARKET */
        .market-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; margin-top: 20px; }
        .market-item { background: #16213e; padding: 15px; border-radius: 15px; text-align: center; border: 1px solid #333; }
        .price-tag { color: #00ffaa; font-weight: bold; display: block; margin: 10px 0; }
        .buy-btn { background: var(--accent); color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; width: 100%; }

        /* INPUTS */
        input { background: #000; border: 2px solid var(--p-color); color: white; padding: 15px; border-radius: 10px; font-size: 20px; width: 80%; text-align: center; margin-bottom: 20px; }
        
        .story-box { font-size: 20px; line-height: 1.6; color: #ccc; font-style: italic; }
        .close-btn { position: absolute; top: 20px; right: 20px; color: white; font-size: 30px; cursor: pointer; }
    </style>
</head>
<body>

    <div class="hud">
        <div>â­ XP: <span id="puan">0</span></div>
        <div>ğŸ† RÃœTBE: <span id="rank">Ã‡AYLAK</span></div>
        <div onclick="openCheat()" style="cursor:pointer">âš™ï¸</div>
    </div>

    <div class="container">
        <div class="ai-center">
            <div class="avatar-zone">
                <div id="main-ai" class="avatar">ğŸ¤–</div>
                <div id="companion" class="bot-companion">ğŸ›¸</div>
            </div>
            <div>
                <h1 style="margin:0; font-family:'Orbitron'">KANKA AI v4.0</h1>
                <p id="speech">Sinyal alÄ±ndÄ±. Matematik evrenini kurtarmak iÃ§in hazÄ±r mÄ±sÄ±n Utkan?</p>
            </div>
        </div>

        <div class="mode-grid">
            <div class="card" onclick="startQuest('kolay')"><h3>ğŸŒ± KOLAY MOD</h3><p>Yeni baÅŸlayanlar iÃ§in temel iÅŸlemler.</p></div>
            <div class="card" onclick="startQuest('orta')"><h3>âš”ï¸ ORTA MOD</h3><p>HÄ±zlÄ± dÃ¼ÅŸÃ¼nme ve karmaÅŸÄ±k denklemler.</p></div>
            <div class="card" onclick="startQuest('zor')"><h3>ğŸ”¥ ZOR MOD</h3><p>Sadece gerÃ§ek ustalar iÃ§in.</p></div>
            <div class="card" onclick="startQuest('deha')"><h3>ğŸ§  DEHA MODU</h3><p>Problemler ve MantÄ±k SorularÄ±.</p></div>
            <div class="card" style="background:var(--accent)" onclick="openModal('market')"><h3>ğŸ›’ MEGA MARKET</h3><p>100+ EÅŸya ve YardÄ±mcÄ±lar</p></div>
            <div class="card" style="background:var(--s-color)" onclick="startStory()"><h3>ğŸ“– HÄ°KAYE MODU</h3><p>Evrenin Kaderini Belirle</p></div>
        </div>
    </div>

    <div id="quest-modal" class="modal">
        <div class="modal-inner">
            <span class="close-btn" onclick="closeModal('quest-modal')">&times;</span>
            <h2 id="q-title" style="color:var(--p-color)">GÃ–REV BAÅLIYOR</h2>
            <div id="q-text" style="font-size: 30px; margin: 30px 0;">? + ? = ?</div>
            <input type="number" id="q-input" placeholder="Sonucu buraya yaz...">
            <button class="buy-btn" style="height:50px; font-size:20px" onclick="checkAnswer()">ENERJÄ°YÄ° GÃ–NDER!</button>
        </div>
    </div>

    <div id="market" class="modal">
        <div class="modal-inner">
            <span class="close-btn" onclick="closeModal('market')">&times;</span>
            <h2>ğŸš€ GALAKTÄ°K MARKET</h2>
            <div id="market-list" class="market-grid">
                </div>
        </div>
    </div>

    <div id="story" class="modal">
        <div class="modal-inner">
            <span class="close-btn" onclick="closeModal('story')">&times;</span>
            <h2>ğŸŒŒ MATEMATÄ°K EFESANESÄ°</h2>
            <div id="story-content" class="story-box"></div>
            <button id="story-btn" class="buy-btn" style="margin-top:20px;" onclick="nextStep()">DEVAM ET</button>
        </div>
    </div>

    <script>
        let xp = 0;
        let curAns = 0;
        let diff = 'kolay';
        let step = 0;

        function speak(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'tr-TR';
            msg.pitch = 0.5; // Daha aÄŸÄ±r ve teknolojik ses
            msg.rate = 1.1;
            window.speechSynthesis.speak(msg);
        }

        function openModal(id) { document.getElementById(id).style.display = 'block'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        function startQuest(d) {
            diff = d;
            openModal('quest-modal');
            generateQuestion();
        }

        function generateQuestion() {
            let n1, n2, op = "+";
            if(diff === 'kolay') { n1 = r(1,20); n2 = r(1,20); curAns = n1+n2; op = "+"; }
            else if(diff === 'orta') { n1 = r(10,50); n2 = r(10,50); curAns = n1*2; op = "x 2"; }
            else if(diff === 'zor') { n1 = r(5,15); n2 = r(5,15); curAns = n1*n2; op = "x"; }
            else { 
                let probs = ["Bir sayÄ±nÄ±n 3 katÄ±nÄ±n 5 fazlasÄ± 20 ise bu sayÄ± kaÃ§tÄ±r?", "12 tavuÄŸun olduÄŸu kÃ¼mese 4 tavÅŸan gelirse toplam ayak sayÄ±sÄ± kaÃ§ olur?"];
                let ans = [5, 40];
                let idx = r(0,1);
                document.getElementById('q-text').innerText = probs[idx];
                curAns = ans[idx];
                speak(probs[idx]);
                return;
            }
            let q = `${n1} ${op} ${n2} = ?`;
            document.getElementById('q-text').innerText = q;
            speak(q);
        }

        function checkAnswer() {
            let val = parseInt(document.getElementById('q-input').value);
            if(val === curAns) {
                xp += (diff === 'deha' ? 500 : 100);
                updateHUD();
                speak("BaÅŸarÄ±lÄ±. Veri akÄ±ÅŸÄ± saÄŸlandÄ±.");
                closeModal('quest-modal');
            } else {
                speak("Hata! Sistem Ã§Ã¶kÃ¼yor, tekrar dene.");
            }
            document.getElementById('q-input').value = "";
        }

        function updateHUD() {
            document.getElementById('puan').innerText = xp;
            let r = "Ã‡AYLAK";
            if(xp > 1000) r = "Ã–ÄRENCÄ°";
            if(xp > 5000) r = "USTA";
            if(xp > 20000) r = "MATEMATÄ°K DEHASI";
            document.getElementById('rank').innerText = r;
        }

        // MARKET LOAD (100 Items Demo)
        const items = [
            {n: "YardÄ±mcÄ± Robot S-1", p: 1000, e: "ğŸ¤–"},
            {n: "UÃ§an Daire AsistanÄ±", p: 3000, e: "ğŸ›¸"},
            {n: "AltÄ±n Ä°ÅŸlemci", p: 5000, e: "ğŸ¦¾"},
            {n: "Kuantum Ã‡ekirdek", p: 10000, e: "âš›ï¸"},
            {n: "Zaman BÃ¼kÃ¼cÃ¼", p: 50000, e: "â³"}
        ];

        function loadMarket() {
            let html = "";
            for(let i=0; i<30; i++) { // 30 ana eÅŸya ve varyasyonlar
                let item = items[i % items.length];
                html += `<div class="market-item">
                    <span>${item.e}</span><br><b>${item.n} v.${i+1}</b>
                    <span class="price-tag">${item.p * (i+1)} XP</span>
                    <button class="buy-btn" onclick="buy(${item.p * (i+1)}, '${item.e}')">SATIN AL</button>
                </div>`;
            }
            document.getElementById('market-list').innerHTML = html;
        }
        loadMarket();

        function buy(p, e) {
            if(xp >= p) {
                xp -= p;
                updateHUD();
                document.getElementById('companion').innerText = e;
                document.getElementById('companion').style.display = 'block';
                speak("Yeni modÃ¼l entegre edildi.");
            } else {
                speak("XP yetersiz. Daha fazla gÃ¶rev tamamla.");
            }
        }

        // STORY
        const storyParts = [
            "YÄ±l 2026. KaranlÄ±k bir yapay zeka tÃ¼m sayÄ±larÄ± sildi. DÃ¼nya kaosa sÃ¼rÃ¼klendi...",
            "Sadece antik matematik kodlarÄ±nÄ± bilen bir kahraman kalmÄ±ÅŸtÄ±: UTKAN.",
            "Kanka AI'yÄ± yeniden programlayarak sayÄ±larÄ± geri getirmelisin.",
            "Zorluk seviyelerini aÅŸtÄ±kÃ§a, kaybolan galaksiler yeniden aydÄ±nlanacak. BaÅŸlayalÄ±m mÄ±?"
        ];

        function startStory() { step = 0; openModal('story'); nextStep(); }
        function nextStep() {
            if(step < storyParts.length) {
                document.getElementById('story-content').innerText = storyParts[step];
                speak(storyParts[step]);
                step++;
            } else {
                closeModal('story');
            }
        }

        function openCheat() {
            let c = prompt("Ã–zel Kod Girin:");
            if(c === "sonsuz para") {
                xp = 9999999;
                updateHUD();
                speak("Hile aktif. Utkan artÄ±k sÄ±nÄ±rsÄ±z gÃ¼ce sahip.");
            }
        }

        function r(min, max) { return Math.floor(Math.random() * (max - min + 1) + min); }
    </script>
</body>
</html>
