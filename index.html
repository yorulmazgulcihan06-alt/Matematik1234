                    <!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS V90 | Utkan Final Edition</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        :root { --p: #3b82f6; --s: #10b981; --d: #080c14; --r: #ef4444; --b: #161b22; --y: #fbbf24; --tr: #da291c; }
        body { margin: 0; background: var(--d); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        /* CANLI YAYIN MODU (G√ñRSELDEKƒ∞ TASARIM) */
        #live-fullscreen { display: none; position: fixed; inset: 0; background: #000; z-index: 9999999; }
        #exit-header { position: absolute; top: 0; width: 100%; height: 50px; background: var(--tr); display: flex; align-items: center; justify-content: center; z-index: 10000000; }
        .page { display: none; width: 100%; height: 100vh; padding: 20px; box-sizing: border-box; overflow-y: auto; padding-bottom: 100px; }
        .card { background: var(--b); padding: 15px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #30363d; }
        .btn { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; color: white; margin-top: 10px; background: var(--p); }

        /* SOHBET K√ñPR√úS√ú */
        #bridge-msgs { flex: 1; overflow-y: auto; padding: 10px; font-family: monospace; font-size: 13px; line-height: 1.5; }
        .nav { position: fixed; bottom: 0; width: 100%; height: 70px; background: #0f172a; display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #334155; }
        
        /* AI ONARIM */
        #repair-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 9000000; text-align: center; }
        .repair-active { box-shadow: 0 0 20px var(--y) !important; border: 2px solid var(--y) !important; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div id="live-fullscreen">
        <div id="exit-header">
            <button onclick="exitLive()" style="background:white; color:var(--tr); border:none; padding:8px 20px; border-radius:20px; font-weight:bold; cursor:pointer;">üî¥ YAYINDAN √áIK</button>
        </div>
        <div style="display: flex; height: 100%; padding-top: 50px; box-sizing: border-box;">
            <div id="player-container" style="flex: 3; background: #000;">
                <div id="yt-player"></div>
            </div>
            <div id="live-chat-side" style="flex: 1; background: #0d1117; border-left: 2px solid var(--tr); display: flex; flex-direction: column;">
                <div style="background:var(--tr); color:white; font-size:10px; padding:5px; text-align:center;">AI SOHBET K√ñPR√úS√ú (0.1s SYNC)</div>
                <div id="bridge-msgs"></div>
                <input type="text" id="chat-input" onkeypress="if(event.key==='Enter') sendMsg()" placeholder="Hocaya mesaj g√∂nder..." style="width:100%; padding:15px; background:#000; color:white; border:none; border-top:1px solid var(--tr);">
            </div>
        </div>
    </div>

    <div id="repair-overlay" onclick="handleRepair(event)">
        <h1 style="color:var(--y); margin-top:200px;">‚öôÔ∏è AI ONARIM MODU</h1>
        <p>Hatalƒ± mod√ºle dokun!</p>
    </div>

    <div id="login-screen" style="position:fixed; inset:0; background:var(--d); z-index:100000; display:flex; align-items:center; justify-content:center;">
        <div class="card" style="width:300px; text-align:center;">
            <h1 style="color:var(--p);">NEXUS V90</h1>
            <input type="text" id="user-name" placeholder="ƒ∞sminiz veya Admin Kodunuz" class="btn" style="background:#000; border:1px solid #334155;">
            <button onclick="login()" class="btn">BAƒûLAN</button>
        </div>
    </div>

    <div id="home-page" class="page" style="display:block;">
        <div class="card" style="text-align:center;">
            <h2 id="disp-user">...</h2>
            <p id="disp-id" style="color:var(--p);"></p>
            <button class="btn" style="background:var(--tr);" onclick="launchLive()">üì∫ CANLI YAYINA KATIL (HIZLI MOD)</button>
        </div>
        <div class="card">
            <h3>üí¨ Global Sohbet</h3>
            <div id="global-chat" style="height:150px; overflow-y:auto; background:#000; padding:10px; margin-bottom:10px;"></div>
            <input type="text" id="global-input" placeholder="Herkese mesaj yaz..." style="width:70%; padding:10px; background:#000; color:white; border:1px solid #333;">
            <button onclick="sendGlobal()" class="btn" style="width:25%; margin:0; display:inline-block;">G√ñNDER</button>
        </div>
    </div>

    <div class="nav">
        <div onclick="showPage('home-page')">üè†<br>Ana Sayfa</div>
        <div onclick="startRepair()" style="color:var(--y);">ü§ñ<br>Onar</div>
    </div>

    <script>
        let player;
        const videoList = ["B_S_fVz-u-k", "5k-x90iUoF4", "vD6e7XoEwSg"]; // 1. bozuksa 2.'ye 0.1s'de ge√ßer
        let currentVid = 0;
        let myData = { name: "", id: "" };

        // --- Gƒ∞Rƒ∞≈û ---
        function login() {
            const name = document.getElementById('user-name').value;
            if(!name) return;
            myData.name = name;
            myData.id = "NXS-" + Math.floor(1000 + Math.random() * 9000);
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('disp-user').innerText = myData.name;
            document.getElementById('disp-id').innerText = "ID: " + myData.id;
        }

        // --- 0.1s HATA YAKALAYAN CANLI YAYIN MOTORU ---
        function launchLive() {
            document.getElementById('live-fullscreen').style.display = 'block';
            loadVideo(videoList[currentVid]);
            startBridge();
        }

        function loadVideo(id) {
            if (player) { try { player.destroy(); } catch(e) {} }
            
            document.getElementById('player-container').innerHTML = '<div id="yt-player"></div>';
            
            player = new YT.Player('yt-player', {
                height: '100%',
                width: '100%',
                videoId: id,
                playerVars: { 'autoplay': 1, 'mute': 0, 'enablejsapi': 1 },
                events: {
                    'onReady': (e) => e.target.playVideo(),
                    'onError': onPlayerError // 0.1 SANƒ∞YEDE BURASI √áALI≈ûIR
                }
            });
        }

        function onPlayerError() {
            console.log("AI: Hata yakalandƒ±! 0.1s i√ßinde deƒüi≈ütiriliyor...");
            currentVid++;
            if(currentVid < videoList.length) {
                loadVideo(videoList[currentVid]);
            } else {
                alert("T√ºm kanallar denendi, aktif yayƒ±n bulunamadƒ±.");
                exitLive();
            }
        }

        function exitLive() {
            document.getElementById('live-fullscreen').style.display = 'none';
            if(player) player.stopVideo();
        }

        // --- SOHBET K√ñPR√úS√ú ---
        function startBridge() {
            const box = document.getElementById('bridge-msgs');
            const scenario = [
                {u: "Ali", m: "Hocam 5. sƒ±nƒ±f matematik s√ºper!"},
                {u: "Merve", m: "NEXUS hƒ±zƒ± ≈üaka mƒ±?"},
                {u: "Can", m: "Sonunda √ßalƒ±≈üan bir site!"}
            ];
            setInterval(() => {
                if(document.getElementById('live-fullscreen').style.display === 'block') {
                    const p = scenario[Math.floor(Math.random()*scenario.length)];
                    box.innerHTML += `<div><b style="color:var(--r);">${p.u}:</b> ${p.m}</div>`;
                    box.scrollTop = box.scrollHeight;
                }
            }, 500); // Ger√ßek√ßi akƒ±≈ü hƒ±zƒ±
        }

        function sendMsg() {
            const inp = document.getElementById('chat-input');
            document.getElementById('bridge-msgs').innerHTML += `<div><b style="color:var(--s);">SEN:</b> ${inp.value}</div>`;
            inp.value = "";
        }

        // --- AI ONARIM ---
        function startRepair() {
            document.getElementById('repair-overlay').style.display = 'block';
            document.querySelectorAll('.btn').forEach(b => b.classList.add('repair-active'));
        }

        function handleRepair(e) {
            const target = e.target.closest('.btn');
            if(target) {
                document.getElementById('repair-overlay').innerHTML = "<h1>üõ†Ô∏è ONARILIYOR...</h1>";
                setTimeout(() => { location.reload(); }, 1500);
            }
        }

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.style.display='none');
            document.getElementById(id).style.display='block';
        }
    </script>
</body>
</html>
