<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TITAN-X SYSTEM</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/holistic"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Courier New', monospace; }
        canvas { position: absolute; width: 100vw; height: 100vh; transform: scaleX(-1); }
        
        /* GİRİŞ EKRANI */
        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 100; display: flex; flex-direction: column;
            justify-content: center; align-items: center; color: #0f0;
        }
        #boot-text { font-size: 20px; animation: blink 0.5s infinite; }
        #start-btn {
            margin-top: 20px; padding: 15px 40px; border: 2px solid #0f0; background: transparent;
            color: #0f0; font-size: 18px; font-weight: bold; cursor: pointer;
            box-shadow: 0 0 15px #0f0;
        }

        /* HUD KATMANLARI */
        .hud-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }
        
        .corner-box {
            position: absolute; border: 2px solid rgba(0, 255, 255, 0.5); padding: 10px;
            color: cyan; font-size: 12px; background: rgba(0, 20, 20, 0.6);
        }
        .top-left { top: 20px; left: 20px; width: 150px; }
        .top-right { top: 20px; right: 20px; text-align: right; }
        .bottom-left { bottom: 20px; left: 20px; }
        
        /* AKAN YAZILAR */
        .scrolling-code {
            position: absolute; right: 10px; top: 100px; width: 100px; height: 300px;
            color: rgba(0, 255, 0, 0.6); font-size: 10px; overflow: hidden; text-align: right;
        }

        /* HEDEF KUTUSU (Yüz Etrafında) */
        #target-box {
            position: absolute; border: 2px solid red; box-shadow: 0 0 10px red;
            width: 0; height: 0; display: none; z-index: 5;
            transition: all 0.1s ease;
        }
        #target-label {
            position: absolute; top: -20px; left: 0; background: red; color: white;
            font-size: 10px; padding: 2px 5px; white-space: nowrap;
        }

        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <div id="boot-screen">
        <div id="boot-text">SYSTEM INITIALIZING...</div>
        <button id="start-btn" onclick="startSystem()">BAŞLAT / START</button>
    </div>

    <canvas id="canvas"></canvas>
    <video id="video" style="display:none" playsinline></video>

    <div id="target-box"><div id="target-label">HEDEF: TANIMLANAMIYOR</div></div>

    <div class="hud-overlay">
        <div class="corner-box top-left">
            CPU: <span id="cpu">0</span>%<br>
            RAM: <span id="ram">0</span>MB<br>
            FPS: <span id="fps">0</span>
        </div>
        <div class="corner-box top-right">
            TITAN-X PROTOCOL<br>
            V.9.0.1 [BETA]<br>
            SECURE LINK: ACTIVE
        </div>
        <div class="corner-box bottom-left">
            SCAN MODE: OMNI<br>
            THREAT: LOW
        </div>
        <div class="scrolling-code" id="matrix"></div>
    </div>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const targetBox = document.getElementById('target-box');
        
        let startTime = Date.now();
        let frameCount = 0;

        // MATRİX KODLARI OLUŞTUR
        setInterval(() => {
            const matrix = document.getElementById('matrix');
            matrix.innerHTML += Math.random().toString(36).substring(7) + "<br>";
            if(matrix.innerHTML.length > 500) matrix.innerHTML = "";
            
            // SAHTE VERİ GÜNCELLEME
            document.getElementById('cpu').innerText = Math.floor(Math.random() * 30 + 10);
            document.getElementById('ram').innerText = Math.floor(Math.random() * 500 + 1024);
        }, 100);

        // HOLISTIC MODEL (YÜZ + VÜCUT + EL)
        const holistic = new Holistic({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/holistic/${file}`});
        holistic.setOptions({
            modelComplexity: 0, // HIZ İÇİN 0
            smoothLandmarks: true,
            minDetectionConfidence: 0.5,
            minTrackingConfidence: 0.5
        });

        holistic.onResults((results) => {
            // FPS HESAPLA
            frameCount++;
            if (Date.now() - startTime > 1000) {
                document.getElementById('fps').innerText = frameCount;
                frameCount = 0;
                startTime = Date.now();
            }

            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            ctx.save();
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);

            // ÇİZİM FONKSİYONLARI
            ctx.lineWidth = 2;
            
            // VÜCUT (CYAN)
            if (results.poseLandmarks) {
                drawConnectors(ctx, results.poseLandmarks, POSE_CONNECTIONS, {color: '#00FFFF', lineWidth: 2});
                drawLandmarks(ctx, results.poseLandmarks, {color: '#00FFFF', lineWidth: 1, radius: 2});
            }

            // ELLER (MAGENTA & SARI)
            if (results.leftHandLandmarks) {
                drawConnectors(ctx, results.leftHandLandmarks, HAND_CONNECTIONS, {color: '#FF00FF', lineWidth: 2});
                drawLandmarks(ctx, results.leftHandLandmarks, {color: '#FFFF00', radius: 3});
            }
            if (results.rightHandLandmarks) {
                drawConnectors(ctx, results.rightHandLandmarks, HAND_CONNECTIONS, {color: '#FF00FF', lineWidth: 2});
                drawLandmarks(ctx, results.rightHandLandmarks, {color: '#FFFF00', radius: 3});
            }

            // YÜZ (YEŞİL MATRIX)
            if (results.faceLandmarks) {
                drawConnectors(ctx, results.faceLandmarks, FACEMESH_TESSELATION, {color: '#00FF0011', lineWidth: 0.5});
                
                // HEDEF KUTUSUNU YÜZE SABİTLE (CSS İLE)
                // Burun ucunu referans alıyoruz (Index 1)
                const nose = results.faceLandmarks[1];
                if(nose) {
                    const x = (1 - nose.x) * window.innerWidth; // Mirror effect
                    const y = nose.y * window.innerHeight;
                    
                    targetBox.style.display = "block";
                    targetBox.style.left = (x - 75) + "px"; // Ortala
                    targetBox.style.top = (y - 100) + "px"; // Ortala
                    targetBox.style.width = "150px";
                    targetBox.style.height = "200px";
                }
            } else {
                targetBox.style.display = "none";
            }

            ctx.restore();
        });

        function startSystem() {
            document.getElementById('boot-screen').style.display = 'none';
            const camera = new Camera(video, {
                onFrame: async () => { await holistic.send({image: video}); },
                width: 640, height: 480
            });
            camera.start();
        }
    </script>
</body>
</html>
